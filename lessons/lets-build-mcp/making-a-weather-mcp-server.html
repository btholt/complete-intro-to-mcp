<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png" data-next-head=""/><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png" data-next-head=""/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png" data-next-head=""/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png" data-next-head=""/><link rel="icon" type="image/x-icon" href="/images/favicon.ico" data-next-head=""/><title data-next-head="">Making a Weather MCP Server – Complete Intro to MCP</title><meta name="description" content="Brian Holt guides you in building a practical MCP server that augments an LLM with live data by creating a weather tool with the Open-Meteo API. The example walks through the weather.js code to register a Get Current Weather tool, handle latitude/longitude inputs, fetch data, and return structured outputs for AI agents. A hands-on tutorial on the Model Context Protocol (MCP) for powering AI applications with real-time weather information." data-next-head=""/><meta name="keywords" content="MCP,Model Context Protocol,Open-Meteo,weather API,AI agents,Brian Holt,weather tool" data-next-head=""/><meta name="og:description" content="Brian Holt guides you in building a practical MCP server that augments an LLM with live data by creating a weather tool with the Open-Meteo API. The example walks through the weather.js code to register a Get Current Weather tool, handle latitude/longitude inputs, fetch data, and return structured outputs for AI agents. A hands-on tutorial on the Model Context Protocol (MCP) for powering AI applications with real-time weather information." data-next-head=""/><meta name="og:title" content="Making a Weather MCP Server – Complete Intro to MCP" data-next-head=""/><meta name="og:image" content="/images/social-share-cover.jpg" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><link data-next-font="size-adjust" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/086f6a648d0d9276.css" as="style"/><link rel="stylesheet" href="/_next/static/css/086f6a648d0d9276.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-b66ed8ba6f029a99.js" defer=""></script><script src="/_next/static/chunks/framework-2f335d22a7318891.js" defer=""></script><script src="/_next/static/chunks/main-00b4e1227fd2aa8a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-b9f8acf1434dd4b3.js" defer=""></script><script src="/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-2115f22e4e476f99.js" defer=""></script><script src="/_next/static/G_slUKxNBRf2cik66oGLY/_buildManifest.js" defer=""></script><script src="/_next/static/G_slUKxNBRf2cik66oGLY/_ssgManifest.js" defer=""></script></head><body><script async="" defer="" src="https://a.holt.courses/latest.js"></script><div id="__next"><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/">Complete Intro to MCP</a></h1><div class="navbar-info"><a href="https://frontendmasters.com/courses/mcp/" class="cta-btn">Watch on Frontend Masters</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><p>So let&#39;s make an actually useful MCP server. An MCP server is a way to augment the abilities of the LLM you&#39;re working with. In our case, we&#39;re working with chat bots, so let&#39;s augment their ability to retrieve reliable data.</p>
<p><a href="https://open-meteo.com/">Open-Meteo</a> is a wonderful weather service that is free and doesn&#39;t even require you to sign up! They have a generous free tier that is absolutely perfect for toying around with. They graciously agreed to let me use them as my sample API for this course.</p>
<blockquote>
<p>In the event that open-meteo won&#39;t work for you or you just want to try something else, <a href="https://github.com/public-apis/public-apis">the public api repo on GitHub</a> is a wonderful place to find another API to work with.</p>
</blockquote>
<p>So we&#39;re going to make a tool that&#39;s going to take in a latitude and longitude (which our LLMs are perfectly capable of coming up with) and returns some weather data. Let&#39;s do it!</p>
<p>I&#39;m just going to do this in the same project and make a new file called weather.js. Normally I&#39;d make a new project but this is just a one-off.</p>
<pre><code class="hljs language-javascript"><button class="copy-btn">Copy</button><span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">McpServer</span>,
  <span class="hljs-title class_">ResourceTemplate</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@modelcontextprotocol/sdk/server/mcp.js&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">StdioServerTransport</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@modelcontextprotocol/sdk/server/stdio.js&quot;</span>;
<span class="hljs-keyword">import</span> { fetchWeatherApi } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;openmeteo&quot;</span>;
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;zod&quot;</span>;

<span class="hljs-comment">// Create an MCP server</span>
<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> <span class="hljs-title class_">McpServer</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;weather-server&quot;</span>,
  <span class="hljs-attr">version</span>: <span class="hljs-string">&quot;1.0.0&quot;</span>,
});

<span class="hljs-comment">// Add a weather tool</span>
server.<span class="hljs-title function_">registerTool</span>(
  <span class="hljs-string">&quot;get_weather&quot;</span>,
  {
    <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;Get Current Weather&quot;</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;Get current weather data for a given latitude and longitude&quot;</span>,
    <span class="hljs-attr">inputSchema</span>: {
      <span class="hljs-attr">latitude</span>: z.<span class="hljs-title function_">number</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;Latitude coordinate&quot;</span>),
      <span class="hljs-attr">longitude</span>: z.<span class="hljs-title function_">number</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;Longitude coordinate&quot;</span>),
    },
  },
  <span class="hljs-title function_">async</span> ({ latitude, longitude }) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> params = {
        latitude,
        longitude,
        <span class="hljs-attr">current</span>: [
          <span class="hljs-string">&quot;temperature_2m&quot;</span>,
          <span class="hljs-string">&quot;relative_humidity_2m&quot;</span>,
          <span class="hljs-string">&quot;apparent_temperature&quot;</span>,
          <span class="hljs-string">&quot;is_day&quot;</span>,
          <span class="hljs-string">&quot;precipitation&quot;</span>,
          <span class="hljs-string">&quot;rain&quot;</span>,
          <span class="hljs-string">&quot;wind_speed_10m&quot;</span>,
        ],
        <span class="hljs-attr">wind_speed_unit</span>: <span class="hljs-string">&quot;mph&quot;</span>,
        <span class="hljs-attr">temperature_unit</span>: <span class="hljs-string">&quot;fahrenheit&quot;</span>,
        <span class="hljs-attr">precipitation_unit</span>: <span class="hljs-string">&quot;inch&quot;</span>,
      };

      <span class="hljs-keyword">const</span> url = <span class="hljs-string">&quot;https://api.open-meteo.com/v1/forecast&quot;</span>;
      <span class="hljs-keyword">const</span> responses = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchWeatherApi</span>(url, params);

      <span class="hljs-comment">// Process first location</span>
      <span class="hljs-keyword">const</span> response = responses[<span class="hljs-number">0</span>];

      <span class="hljs-keyword">const</span> current = response.<span class="hljs-title function_">current</span>();

      <span class="hljs-comment">// Note: The order of weather variables in the URL query and the indices below need to match</span>
      <span class="hljs-keyword">const</span> weatherData = {
        <span class="hljs-attr">temperature2m</span>: current.<span class="hljs-title function_">variables</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">value</span>(),
        <span class="hljs-attr">relativeHumidity2m</span>: current.<span class="hljs-title function_">variables</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">value</span>(),
        <span class="hljs-attr">apparentTemperature</span>: current.<span class="hljs-title function_">variables</span>(<span class="hljs-number">2</span>).<span class="hljs-title function_">value</span>(),
        <span class="hljs-attr">isDay</span>: current.<span class="hljs-title function_">variables</span>(<span class="hljs-number">3</span>).<span class="hljs-title function_">value</span>() === <span class="hljs-number">1</span>,
        <span class="hljs-attr">precipitation</span>: current.<span class="hljs-title function_">variables</span>(<span class="hljs-number">4</span>).<span class="hljs-title function_">value</span>(),
        <span class="hljs-attr">rain</span>: current.<span class="hljs-title function_">variables</span>(<span class="hljs-number">5</span>).<span class="hljs-title function_">value</span>(),
        <span class="hljs-attr">windSpeed10m</span>: current.<span class="hljs-title function_">variables</span>(<span class="hljs-number">6</span>).<span class="hljs-title function_">value</span>(),
      };

      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">content</span>: [
          {
            <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;text&quot;</span>,
            <span class="hljs-attr">text</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(weatherData, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>),
          },
        ],
        <span class="hljs-attr">structuredOutput</span>: {
          <span class="hljs-attr">temperature</span>: {
            <span class="hljs-attr">current</span>: current.<span class="hljs-title function_">variables</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">value</span>(),
            <span class="hljs-attr">feelsLike</span>: current.<span class="hljs-title function_">variables</span>(<span class="hljs-number">2</span>).<span class="hljs-title function_">value</span>(),
            <span class="hljs-attr">unit</span>: <span class="hljs-string">&quot;fahrenheit&quot;</span>,
          },
          <span class="hljs-attr">humidity</span>: {
            <span class="hljs-attr">value</span>: current.<span class="hljs-title function_">variables</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">value</span>(),
            <span class="hljs-attr">unit</span>: <span class="hljs-string">&quot;percent&quot;</span>,
          },
          <span class="hljs-attr">wind</span>: {
            <span class="hljs-attr">speed</span>: current.<span class="hljs-title function_">variables</span>(<span class="hljs-number">6</span>).<span class="hljs-title function_">value</span>(),
            <span class="hljs-attr">unit</span>: <span class="hljs-string">&quot;mph&quot;</span>,
          },
          <span class="hljs-attr">precipitation</span>: {
            <span class="hljs-attr">total</span>: current.<span class="hljs-title function_">variables</span>(<span class="hljs-number">4</span>).<span class="hljs-title function_">value</span>(),
            <span class="hljs-attr">rain</span>: current.<span class="hljs-title function_">variables</span>(<span class="hljs-number">5</span>).<span class="hljs-title function_">value</span>(),
            <span class="hljs-attr">unit</span>: <span class="hljs-string">&quot;inches&quot;</span>,
          },
          <span class="hljs-attr">conditions</span>: {
            <span class="hljs-attr">isDay</span>: current.<span class="hljs-title function_">variables</span>(<span class="hljs-number">3</span>).<span class="hljs-title function_">value</span>() === <span class="hljs-number">1</span>,
            <span class="hljs-attr">dayNight</span>: current.<span class="hljs-title function_">variables</span>(<span class="hljs-number">3</span>).<span class="hljs-title function_">value</span>() === <span class="hljs-number">1</span> ? <span class="hljs-string">&quot;day&quot;</span> : <span class="hljs-string">&quot;night&quot;</span>,
          },
        },
      };
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">content</span>: [
          {
            <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;text&quot;</span>,
            <span class="hljs-attr">text</span>: <span class="hljs-string">`Error fetching weather data: <span class="hljs-subst">${error.message}</span>`</span>,
          },
        ],
      };
    }
  }
);

<span class="hljs-comment">// Start receiving messages on stdin and sending messages on stdout</span>
<span class="hljs-keyword">const</span> transport = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StdioServerTransport</span>();
<span class="hljs-keyword">await</span> server.<span class="hljs-title function_">connect</span>(transport);
</code></pre><p>Generally this should all make sense to you – we haven&#39;t really introduced any net new concepts. But now this will actually make API requests for you and provide up-to-date weather information.</p>
<p>Go edit your MCP server config with your new MCP server (you can leave the old one, or delete it, doesn&#39;t matter.)</p>
<pre><code class="hljs language-json"><button class="copy-btn">Copy</button><span class="hljs-attr">&quot;weather-server&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;command&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/path/to/node&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;args&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;/path/to/weather.js&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;env&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;NODE_OPTIONS&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;--no-deprecation&quot;</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre><p>Restart Claude Desktop if you need to. And then ask something like &quot;Do I need a rain jacket in Seattle right now?&quot; or &quot;What are the weather conditions in Minneapolis, MN right now?&quot; and see what it says!</p>
</div><div class="lesson-links"><a href="/lessons/lets-build-mcp/using-our-first-mcp-server" class="prev">← Previous</a><a href="/lessons/lets-build-mcp/resources" class="next">Next →</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/holtbt"><svg fill="none" height="100%" width="32" xmlns="http://www.w3.org/2000/svg" viewBox="0.254 0.25 500 451.95400000000006"><path d="M394.033.25h76.67L303.202 191.693l197.052 260.511h-154.29L225.118 294.205 86.844 452.204H10.127l179.16-204.77L.254.25H158.46l109.234 144.417zm-26.908 406.063h42.483L135.377 43.73h-45.59z" fill="var(--footer-icons)"></path></svg></a></li><li class="social"><a href="https://bsky.app/profile/brianholt.me"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -3.268 64 68.414" width="38" height="100%"><path fill="var(--footer-icons)" d="M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022 0 8.51 0 6.55 0-3.268 8.579-.182 13.873 3.805zm36.254 0C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745z"></path></svg></a></li><li class="social"><a href="https://github.com/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Exercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul><div class="theme-icons"><button aria-label="Activate dark mode" title="Activate dark mode" class="theme-toggle"><svg xmlns="http://www.w3.org/2000/svg" width="36px" height="100%" viewBox="0 -960 960 960" fill="var(--text-footer)" role="img"><title>Dark Mode Icon</title><path d="M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Z"></path></svg></button></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"title":"Making a Weather MCP Server","description":"Brian Holt guides you in building a practical MCP server that augments an LLM with live data by creating a weather tool with the Open-Meteo API. The example walks through the weather.js code to register a Get Current Weather tool, handle latitude/longitude inputs, fetch data, and return structured outputs for AI agents. A hands-on tutorial on the Model Context Protocol (MCP) for powering AI applications with real-time weather information.","keywords":["MCP","Model Context Protocol","Open-Meteo","weather API","AI agents","Brian Holt","weather tool"]},"html":"\u003cp\u003eSo let\u0026#39;s make an actually useful MCP server. An MCP server is a way to augment the abilities of the LLM you\u0026#39;re working with. In our case, we\u0026#39;re working with chat bots, so let\u0026#39;s augment their ability to retrieve reliable data.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://open-meteo.com/\"\u003eOpen-Meteo\u003c/a\u003e is a wonderful weather service that is free and doesn\u0026#39;t even require you to sign up! They have a generous free tier that is absolutely perfect for toying around with. They graciously agreed to let me use them as my sample API for this course.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIn the event that open-meteo won\u0026#39;t work for you or you just want to try something else, \u003ca href=\"https://github.com/public-apis/public-apis\"\u003ethe public api repo on GitHub\u003c/a\u003e is a wonderful place to find another API to work with.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eSo we\u0026#39;re going to make a tool that\u0026#39;s going to take in a latitude and longitude (which our LLMs are perfectly capable of coming up with) and returns some weather data. Let\u0026#39;s do it!\u003c/p\u003e\n\u003cp\u003eI\u0026#39;m just going to do this in the same project and make a new file called weather.js. Normally I\u0026#39;d make a new project but this is just a one-off.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cbutton class=\"copy-btn\"\u003eCopy\u003c/button\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e {\n  \u003cspan class=\"hljs-title class_\"\u003eMcpServer\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003eResourceTemplate\u003c/span\u003e,\n} \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@modelcontextprotocol/sdk/server/mcp.js\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eStdioServerTransport\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@modelcontextprotocol/sdk/server/stdio.js\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { fetchWeatherApi } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;openmeteo\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { z } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;zod\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// Create an MCP server\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e server = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eMcpServer\u003c/span\u003e({\n  \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;weather-server\u0026quot;\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003eversion\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;1.0.0\u0026quot;\u003c/span\u003e,\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// Add a weather tool\u003c/span\u003e\nserver.\u003cspan class=\"hljs-title function_\"\u003eregisterTool\u003c/span\u003e(\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;get_weather\u0026quot;\u003c/span\u003e,\n  {\n    \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;Get Current Weather\u0026quot;\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003edescription\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;Get current weather data for a given latitude and longitude\u0026quot;\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003einputSchema\u003c/span\u003e: {\n      \u003cspan class=\"hljs-attr\"\u003elatitude\u003c/span\u003e: z.\u003cspan class=\"hljs-title function_\"\u003enumber\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Latitude coordinate\u0026quot;\u003c/span\u003e),\n      \u003cspan class=\"hljs-attr\"\u003elongitude\u003c/span\u003e: z.\u003cspan class=\"hljs-title function_\"\u003enumber\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Longitude coordinate\u0026quot;\u003c/span\u003e),\n    },\n  },\n  \u003cspan class=\"hljs-title function_\"\u003easync\u003c/span\u003e ({ latitude, longitude }) =\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e params = {\n        latitude,\n        longitude,\n        \u003cspan class=\"hljs-attr\"\u003ecurrent\u003c/span\u003e: [\n          \u003cspan class=\"hljs-string\"\u003e\u0026quot;temperature_2m\u0026quot;\u003c/span\u003e,\n          \u003cspan class=\"hljs-string\"\u003e\u0026quot;relative_humidity_2m\u0026quot;\u003c/span\u003e,\n          \u003cspan class=\"hljs-string\"\u003e\u0026quot;apparent_temperature\u0026quot;\u003c/span\u003e,\n          \u003cspan class=\"hljs-string\"\u003e\u0026quot;is_day\u0026quot;\u003c/span\u003e,\n          \u003cspan class=\"hljs-string\"\u003e\u0026quot;precipitation\u0026quot;\u003c/span\u003e,\n          \u003cspan class=\"hljs-string\"\u003e\u0026quot;rain\u0026quot;\u003c/span\u003e,\n          \u003cspan class=\"hljs-string\"\u003e\u0026quot;wind_speed_10m\u0026quot;\u003c/span\u003e,\n        ],\n        \u003cspan class=\"hljs-attr\"\u003ewind_speed_unit\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;mph\u0026quot;\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003etemperature_unit\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;fahrenheit\u0026quot;\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eprecipitation_unit\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;inch\u0026quot;\u003c/span\u003e,\n      };\n\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e url = \u003cspan class=\"hljs-string\"\u003e\u0026quot;https://api.open-meteo.com/v1/forecast\u0026quot;\u003c/span\u003e;\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e responses = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efetchWeatherApi\u003c/span\u003e(url, params);\n\n      \u003cspan class=\"hljs-comment\"\u003e// Process first location\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e response = responses[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e];\n\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e current = response.\u003cspan class=\"hljs-title function_\"\u003ecurrent\u003c/span\u003e();\n\n      \u003cspan class=\"hljs-comment\"\u003e// Note: The order of weather variables in the URL query and the indices below need to match\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e weatherData = {\n        \u003cspan class=\"hljs-attr\"\u003etemperature2m\u003c/span\u003e: current.\u003cspan class=\"hljs-title function_\"\u003evariables\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003evalue\u003c/span\u003e(),\n        \u003cspan class=\"hljs-attr\"\u003erelativeHumidity2m\u003c/span\u003e: current.\u003cspan class=\"hljs-title function_\"\u003evariables\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003evalue\u003c/span\u003e(),\n        \u003cspan class=\"hljs-attr\"\u003eapparentTemperature\u003c/span\u003e: current.\u003cspan class=\"hljs-title function_\"\u003evariables\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003evalue\u003c/span\u003e(),\n        \u003cspan class=\"hljs-attr\"\u003eisDay\u003c/span\u003e: current.\u003cspan class=\"hljs-title function_\"\u003evariables\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003evalue\u003c/span\u003e() === \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eprecipitation\u003c/span\u003e: current.\u003cspan class=\"hljs-title function_\"\u003evariables\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003evalue\u003c/span\u003e(),\n        \u003cspan class=\"hljs-attr\"\u003erain\u003c/span\u003e: current.\u003cspan class=\"hljs-title function_\"\u003evariables\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003evalue\u003c/span\u003e(),\n        \u003cspan class=\"hljs-attr\"\u003ewindSpeed10m\u003c/span\u003e: current.\u003cspan class=\"hljs-title function_\"\u003evariables\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003evalue\u003c/span\u003e(),\n      };\n\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n        \u003cspan class=\"hljs-attr\"\u003econtent\u003c/span\u003e: [\n          {\n            \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;text\u0026quot;\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003etext\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eJSON\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003estringify\u003c/span\u003e(weatherData, \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e),\n          },\n        ],\n        \u003cspan class=\"hljs-attr\"\u003estructuredOutput\u003c/span\u003e: {\n          \u003cspan class=\"hljs-attr\"\u003etemperature\u003c/span\u003e: {\n            \u003cspan class=\"hljs-attr\"\u003ecurrent\u003c/span\u003e: current.\u003cspan class=\"hljs-title function_\"\u003evariables\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003evalue\u003c/span\u003e(),\n            \u003cspan class=\"hljs-attr\"\u003efeelsLike\u003c/span\u003e: current.\u003cspan class=\"hljs-title function_\"\u003evariables\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003evalue\u003c/span\u003e(),\n            \u003cspan class=\"hljs-attr\"\u003eunit\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;fahrenheit\u0026quot;\u003c/span\u003e,\n          },\n          \u003cspan class=\"hljs-attr\"\u003ehumidity\u003c/span\u003e: {\n            \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: current.\u003cspan class=\"hljs-title function_\"\u003evariables\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003evalue\u003c/span\u003e(),\n            \u003cspan class=\"hljs-attr\"\u003eunit\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;percent\u0026quot;\u003c/span\u003e,\n          },\n          \u003cspan class=\"hljs-attr\"\u003ewind\u003c/span\u003e: {\n            \u003cspan class=\"hljs-attr\"\u003espeed\u003c/span\u003e: current.\u003cspan class=\"hljs-title function_\"\u003evariables\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003evalue\u003c/span\u003e(),\n            \u003cspan class=\"hljs-attr\"\u003eunit\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;mph\u0026quot;\u003c/span\u003e,\n          },\n          \u003cspan class=\"hljs-attr\"\u003eprecipitation\u003c/span\u003e: {\n            \u003cspan class=\"hljs-attr\"\u003etotal\u003c/span\u003e: current.\u003cspan class=\"hljs-title function_\"\u003evariables\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003evalue\u003c/span\u003e(),\n            \u003cspan class=\"hljs-attr\"\u003erain\u003c/span\u003e: current.\u003cspan class=\"hljs-title function_\"\u003evariables\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003evalue\u003c/span\u003e(),\n            \u003cspan class=\"hljs-attr\"\u003eunit\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;inches\u0026quot;\u003c/span\u003e,\n          },\n          \u003cspan class=\"hljs-attr\"\u003econditions\u003c/span\u003e: {\n            \u003cspan class=\"hljs-attr\"\u003eisDay\u003c/span\u003e: current.\u003cspan class=\"hljs-title function_\"\u003evariables\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003evalue\u003c/span\u003e() === \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003edayNight\u003c/span\u003e: current.\u003cspan class=\"hljs-title function_\"\u003evariables\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003evalue\u003c/span\u003e() === \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e ? \u003cspan class=\"hljs-string\"\u003e\u0026quot;day\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e\u0026quot;night\u0026quot;\u003c/span\u003e,\n          },\n        },\n      };\n    } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n        \u003cspan class=\"hljs-attr\"\u003econtent\u003c/span\u003e: [\n          {\n            \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;text\u0026quot;\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003etext\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e`Error fetching weather data: \u003cspan class=\"hljs-subst\"\u003e${error.message}\u003c/span\u003e`\u003c/span\u003e,\n          },\n        ],\n      };\n    }\n  }\n);\n\n\u003cspan class=\"hljs-comment\"\u003e// Start receiving messages on stdin and sending messages on stdout\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e transport = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eStdioServerTransport\u003c/span\u003e();\n\u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e server.\u003cspan class=\"hljs-title function_\"\u003econnect\u003c/span\u003e(transport);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eGenerally this should all make sense to you – we haven\u0026#39;t really introduced any net new concepts. But now this will actually make API requests for you and provide up-to-date weather information.\u003c/p\u003e\n\u003cp\u003eGo edit your MCP server config with your new MCP server (you can leave the old one, or delete it, doesn\u0026#39;t matter.)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e\u003cbutton class=\"copy-btn\"\u003eCopy\u003c/button\u003e\u003cspan class=\"hljs-attr\"\u003e\u0026quot;weather-server\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;command\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;/path/to/node\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;args\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\u0026quot;/path/to/weather.js\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;env\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003e\u0026quot;NODE_OPTIONS\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;--no-deprecation\u0026quot;\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eRestart Claude Desktop if you need to. And then ask something like \u0026quot;Do I need a rain jacket in Seattle right now?\u0026quot; or \u0026quot;What are the weather conditions in Minneapolis, MN right now?\u0026quot; and see what it says!\u003c/p\u003e\n","markdown":"\nSo let's make an actually useful MCP server. An MCP server is a way to augment the abilities of the LLM you're working with. In our case, we're working with chat bots, so let's augment their ability to retrieve reliable data.\n\n[Open-Meteo][om] is a wonderful weather service that is free and doesn't even require you to sign up! They have a generous free tier that is absolutely perfect for toying around with. They graciously agreed to let me use them as my sample API for this course.\n\n\u003e In the event that open-meteo won't work for you or you just want to try something else, [the public api repo on GitHub][public] is a wonderful place to find another API to work with.\n\nSo we're going to make a tool that's going to take in a latitude and longitude (which our LLMs are perfectly capable of coming up with) and returns some weather data. Let's do it!\n\nI'm just going to do this in the same project and make a new file called weather.js. Normally I'd make a new project but this is just a one-off.\n\n```javascript\nimport {\n  McpServer,\n  ResourceTemplate,\n} from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { StdioServerTransport } from \"@modelcontextprotocol/sdk/server/stdio.js\";\nimport { fetchWeatherApi } from \"openmeteo\";\nimport { z } from \"zod\";\n\n// Create an MCP server\nconst server = new McpServer({\n  name: \"weather-server\",\n  version: \"1.0.0\",\n});\n\n// Add a weather tool\nserver.registerTool(\n  \"get_weather\",\n  {\n    title: \"Get Current Weather\",\n    description: \"Get current weather data for a given latitude and longitude\",\n    inputSchema: {\n      latitude: z.number().describe(\"Latitude coordinate\"),\n      longitude: z.number().describe(\"Longitude coordinate\"),\n    },\n  },\n  async ({ latitude, longitude }) =\u003e {\n    try {\n      const params = {\n        latitude,\n        longitude,\n        current: [\n          \"temperature_2m\",\n          \"relative_humidity_2m\",\n          \"apparent_temperature\",\n          \"is_day\",\n          \"precipitation\",\n          \"rain\",\n          \"wind_speed_10m\",\n        ],\n        wind_speed_unit: \"mph\",\n        temperature_unit: \"fahrenheit\",\n        precipitation_unit: \"inch\",\n      };\n\n      const url = \"https://api.open-meteo.com/v1/forecast\";\n      const responses = await fetchWeatherApi(url, params);\n\n      // Process first location\n      const response = responses[0];\n\n      const current = response.current();\n\n      // Note: The order of weather variables in the URL query and the indices below need to match\n      const weatherData = {\n        temperature2m: current.variables(0).value(),\n        relativeHumidity2m: current.variables(1).value(),\n        apparentTemperature: current.variables(2).value(),\n        isDay: current.variables(3).value() === 1,\n        precipitation: current.variables(4).value(),\n        rain: current.variables(5).value(),\n        windSpeed10m: current.variables(6).value(),\n      };\n\n      return {\n        content: [\n          {\n            type: \"text\",\n            text: JSON.stringify(weatherData, null, 2),\n          },\n        ],\n        structuredOutput: {\n          temperature: {\n            current: current.variables(0).value(),\n            feelsLike: current.variables(2).value(),\n            unit: \"fahrenheit\",\n          },\n          humidity: {\n            value: current.variables(1).value(),\n            unit: \"percent\",\n          },\n          wind: {\n            speed: current.variables(6).value(),\n            unit: \"mph\",\n          },\n          precipitation: {\n            total: current.variables(4).value(),\n            rain: current.variables(5).value(),\n            unit: \"inches\",\n          },\n          conditions: {\n            isDay: current.variables(3).value() === 1,\n            dayNight: current.variables(3).value() === 1 ? \"day\" : \"night\",\n          },\n        },\n      };\n    } catch (error) {\n      return {\n        content: [\n          {\n            type: \"text\",\n            text: `Error fetching weather data: ${error.message}`,\n          },\n        ],\n      };\n    }\n  }\n);\n\n// Start receiving messages on stdin and sending messages on stdout\nconst transport = new StdioServerTransport();\nawait server.connect(transport);\n```\n\nGenerally this should all make sense to you – we haven't really introduced any net new concepts. But now this will actually make API requests for you and provide up-to-date weather information.\n\nGo edit your MCP server config with your new MCP server (you can leave the old one, or delete it, doesn't matter.)\n\n```json\n\"weather-server\": {\n    \"command\": \"/path/to/node\",\n    \"args\": [\"/path/to/weather.js\"],\n    \"env\": {\n        \"NODE_OPTIONS\": \"--no-deprecation\"\n    }\n}\n```\n\nRestart Claude Desktop if you need to. And then ask something like \"Do I need a rain jacket in Seattle right now?\" or \"What are the weather conditions in Minneapolis, MN right now?\" and see what it says!\n\n[om]: https://open-meteo.com/\n[public]: https://github.com/public-apis/public-apis\n","slug":"making-a-weather-mcp-server","title":"Making a Weather MCP Server","section":"Let's Build an MCP Server","icon":"file-code","filePath":"/home/runner/work/complete-intro-to-mcp/complete-intro-to-mcp/lessons/04-lets-build-mcp/C-making-a-weather-mcp-server.md","nextSlug":"/lessons/lets-build-mcp/resources","prevSlug":"/lessons/lets-build-mcp/using-our-first-mcp-server"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"lets-build-mcp","slug":"making-a-weather-mcp-server"},"buildId":"G_slUKxNBRf2cik66oGLY","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>