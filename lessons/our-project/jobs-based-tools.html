<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png" data-next-head=""/><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png" data-next-head=""/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png" data-next-head=""/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png" data-next-head=""/><link rel="icon" type="image/x-icon" href="/images/favicon.ico" data-next-head=""/><title data-next-head="">Jobs Based Tools ‚Äì Complete Intro to MCP</title><meta name="description" content="Brian Holt presents a practical, jobs-oriented MCP server from the Complete Intro to MCP course, illustrating how to implement three focused actions with the Model Context Protocol: create high-priority bugs, create low-priority feature requests, and update ticket status. The piece includes JavaScript code for a minimal MCP server and discusses reliability over flexibility using real-world tool selection inspired by Qwen3.6B experiments." data-next-head=""/><meta name="keywords" content="mcp,model context protocol,ai agents,bug tracking,ticket status update,Brian Holt,Complete Intro to MCP" data-next-head=""/><meta name="og:description" content="Brian Holt presents a practical, jobs-oriented MCP server from the Complete Intro to MCP course, illustrating how to implement three focused actions with the Model Context Protocol: create high-priority bugs, create low-priority feature requests, and update ticket status. The piece includes JavaScript code for a minimal MCP server and discusses reliability over flexibility using real-world tool selection inspired by Qwen3.6B experiments." data-next-head=""/><meta name="og:title" content="Jobs Based Tools ‚Äì Complete Intro to MCP" data-next-head=""/><meta name="og:image" content="/images/social-share-cover.jpg" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><link data-next-font="size-adjust" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/086f6a648d0d9276.css" as="style"/><link rel="stylesheet" href="/_next/static/css/086f6a648d0d9276.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-b66ed8ba6f029a99.js" defer=""></script><script src="/_next/static/chunks/framework-2f335d22a7318891.js" defer=""></script><script src="/_next/static/chunks/main-00b4e1227fd2aa8a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-b9f8acf1434dd4b3.js" defer=""></script><script src="/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-2115f22e4e476f99.js" defer=""></script><script src="/_next/static/G_slUKxNBRf2cik66oGLY/_buildManifest.js" defer=""></script><script src="/_next/static/G_slUKxNBRf2cik66oGLY/_ssgManifest.js" defer=""></script></head><body><script async="" defer="" src="https://a.holt.courses/latest.js"></script><div id="__next"><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/">Complete Intro to MCP</a></h1><div class="navbar-info"><a href="https://frontendmasters.com/courses/mcp/" class="cta-btn">Watch on Frontend Masters</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><p>Here&#39;s a real interaction using the complete MCP server I just had with Qwen3:0.6B.</p>
<pre><code><button class="copy-btn">Copy</button>&gt; üë§ using the issues-tracker-server mcp server, create a new issue in my issue tracker that tracks that I need to fix the login bug and mark it urgent and assign it to me. use the api key &lt;API_KEY&gt;

&gt; ü§ñ The tool call was made with the assigned_user_id set to &quot;me&quot;, but the system is rejecting this, indicating a mismatch. The error suggests that the assigned user ID &quot;me&quot; does not exist in the system. Could you confirm that your assigned user ID is correctly set to &quot;your-own-id&quot; instead? Let me know, and I&#x27;ll assist accordingly
</code></pre><p>This is where just mapping your API server to an MCP server runs into trouble.</p>
<ul>
<li>Sequential calls are hard to get right. In this case it&#39;d need to use the API key to try to figure out who you are, then call create issue with that ID.</li>
<li>Giving a agent lots of tools may mean that it can be more flexible but it also leads to confusion. Just by including the health check, it will call it at unexpected times! Agents will make weird, questionable, or even downright-wrong decisions with which tool to use. A smaller set of focused tools is much more likely to succeed.</li>
<li>Generally speaking, you know the few actions you want your model to take. It&#39;s better to just codify these and slowly add more actions later.</li>
</ul>
<p>I&#39;m going to call this &quot;jobs oriented&quot; MCP server as opposed to &quot;API oriented&quot;. I made up these terms. But it suits what we&#39;re trying to get done today.</p>
<p>Instead of having our infinitely flexible API server and hoping the LLM chooses right, let&#39;s say we know we really only want our MCP server to do three things:</p>
<ul>
<li>Create new bugs and mark them as high priority</li>
<li>Create new feature request and mark them as low priority</li>
<li>Update the status of a ticket</li>
</ul>
<p>Frankly, after writing these, they aren&#39;t that different. But man, the difference in success particularly with Qwen3:.6 is <strong>night</strong> and <strong>day</strong>.</p>
<pre><code class="hljs language-javascript"><button class="copy-btn">Copy</button><span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;zod&quot;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">jobsBasedTools</span>(<span class="hljs-params">server</span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">API_BASE_URL</span> = process.<span class="hljs-property">env</span>.<span class="hljs-property">API_BASE_URL</span> || <span class="hljs-string">&quot;http://localhost:3000/api&quot;</span>;

  <span class="hljs-comment">// Hardcoded tag IDs from database</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">BUG_TAG_ID</span> = <span class="hljs-number">3</span>;
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">FEATURE_TAG_ID</span> = <span class="hljs-number">4</span>; <span class="hljs-comment">// Helper function to make HTTP requests</span>
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">makeRequest</span>(<span class="hljs-params">method, url, data = <span class="hljs-literal">null</span>, options = {}</span>) {
    <span class="hljs-keyword">const</span> config = {
      method,
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/json&quot;</span>,
        ...options.<span class="hljs-property">headers</span>,
      },
    };

    <span class="hljs-comment">// Merge other options except headers (which we already handled)</span>
    <span class="hljs-keyword">const</span> { <span class="hljs-attr">headers</span>: _, ...otherOptions } = options;
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(config, otherOptions);

    <span class="hljs-keyword">if</span> (data) {
      config.<span class="hljs-property">body</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data);
    }

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, config);
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">text</span>();

      <span class="hljs-keyword">let</span> jsonResult;
      <span class="hljs-keyword">try</span> {
        jsonResult = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(result);
      } <span class="hljs-keyword">catch</span> {
        jsonResult = result;
      }

      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">status</span>: response.<span class="hljs-property">status</span>,
        <span class="hljs-attr">data</span>: jsonResult,
        <span class="hljs-attr">headers</span>: <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">entries</span>()),
      };
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">status</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span>,
      };
    }
  }

  <span class="hljs-comment">// Tool 1: Create new bug with high priority</span>
  server.<span class="hljs-title function_">registerTool</span>(
    <span class="hljs-string">&quot;create-bug&quot;</span>,
    {
      <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;Create High Priority Bug&quot;</span>,
      <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;Create a new bug issue with high priority and bug tag&quot;</span>,
      <span class="hljs-attr">inputSchema</span>: {
        <span class="hljs-attr">title</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;Bug title&quot;</span>),
        <span class="hljs-attr">description</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;Bug description&quot;</span>),
        <span class="hljs-attr">apiKey</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;API key for authentication&quot;</span>),
      },
    },
    <span class="hljs-title function_">async</span> (params) =&gt; {
      <span class="hljs-keyword">const</span> { apiKey, ...bugData } = params;

      <span class="hljs-comment">// Create bug with high priority and bug tag</span>
      <span class="hljs-keyword">const</span> issueData = {
        ...bugData,
        <span class="hljs-attr">priority</span>: <span class="hljs-string">&quot;high&quot;</span>,
        <span class="hljs-attr">status</span>: <span class="hljs-string">&quot;not_started&quot;</span>,
        <span class="hljs-attr">tag_ids</span>: [<span class="hljs-variable constant_">BUG_TAG_ID</span>], <span class="hljs-comment">// Hardcoded bug tag ID</span>
      };

      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">makeRequest</span>(
        <span class="hljs-string">&quot;POST&quot;</span>,
        <span class="hljs-string">`<span class="hljs-subst">${API_BASE_URL}</span>/issues`</span>,
        issueData,
        { <span class="hljs-attr">headers</span>: { <span class="hljs-string">&quot;x-api-key&quot;</span>: apiKey } }
      );

      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">content</span>: [
          {
            <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;text&quot;</span>,
            <span class="hljs-attr">text</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(result, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>),
          },
        ],
      };
    }
  );

  <span class="hljs-comment">// Tool 2: Create new feature request with low priority</span>
  server.<span class="hljs-title function_">registerTool</span>(
    <span class="hljs-string">&quot;create-feature-request&quot;</span>,
    {
      <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;Create Low Priority Feature Request&quot;</span>,
      <span class="hljs-attr">description</span>:
        <span class="hljs-string">&quot;Create a new feature request issue with low priority and feature tag&quot;</span>,
      <span class="hljs-attr">inputSchema</span>: {
        <span class="hljs-attr">title</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;Feature request title&quot;</span>),
        <span class="hljs-attr">description</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;Feature request description&quot;</span>),
        <span class="hljs-attr">apiKey</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;API key for authentication&quot;</span>),
      },
    },
    <span class="hljs-title function_">async</span> (params) =&gt; {
      <span class="hljs-keyword">const</span> { apiKey, ...featureData } = params;

      <span class="hljs-comment">// Create feature request with low priority and feature tag</span>
      <span class="hljs-keyword">const</span> issueData = {
        ...featureData,
        <span class="hljs-attr">priority</span>: <span class="hljs-string">&quot;low&quot;</span>,
        <span class="hljs-attr">status</span>: <span class="hljs-string">&quot;not_started&quot;</span>,
        <span class="hljs-attr">tag_ids</span>: [<span class="hljs-variable constant_">FEATURE_TAG_ID</span>], <span class="hljs-comment">// Hardcoded feature tag ID</span>
      };

      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">makeRequest</span>(
        <span class="hljs-string">&quot;POST&quot;</span>,
        <span class="hljs-string">`<span class="hljs-subst">${API_BASE_URL}</span>/issues`</span>,
        issueData,
        { <span class="hljs-attr">headers</span>: { <span class="hljs-string">&quot;x-api-key&quot;</span>: apiKey } }
      );

      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">content</span>: [
          {
            <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;text&quot;</span>,
            <span class="hljs-attr">text</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(result, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>),
          },
        ],
      };
    }
  );

  <span class="hljs-comment">// Tool 3: Update ticket status</span>
  server.<span class="hljs-title function_">registerTool</span>(
    <span class="hljs-string">&quot;update-ticket-status&quot;</span>,
    {
      <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;Update Ticket Status&quot;</span>,
      <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;Update the status of an existing ticket/issue&quot;</span>,
      <span class="hljs-attr">inputSchema</span>: {
        <span class="hljs-attr">id</span>: z.<span class="hljs-title function_">number</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;Issue ID to update&quot;</span>),
        <span class="hljs-attr">status</span>: z
          .<span class="hljs-title function_">enum</span>([<span class="hljs-string">&quot;not_started&quot;</span>, <span class="hljs-string">&quot;in_progress&quot;</span>, <span class="hljs-string">&quot;done&quot;</span>])
          .<span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;New status for the ticket&quot;</span>),
        <span class="hljs-attr">apiKey</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;API key for authentication&quot;</span>),
      },
    },
    <span class="hljs-title function_">async</span> (params) =&gt; {
      <span class="hljs-keyword">const</span> { id, status, apiKey } = params;

      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">makeRequest</span>(
        <span class="hljs-string">&quot;PUT&quot;</span>,
        <span class="hljs-string">`<span class="hljs-subst">${API_BASE_URL}</span>/issues/<span class="hljs-subst">${id}</span>`</span>,
        { status },
        { <span class="hljs-attr">headers</span>: { <span class="hljs-string">&quot;x-api-key&quot;</span>: apiKey } }
      );

      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">content</span>: [
          {
            <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;text&quot;</span>,
            <span class="hljs-attr">text</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(result, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>),
          },
        ],
      };
    }
  );
}
</code></pre><p>Feel free to type this out, but in reality the <em>code</em> isn&#39;t very different, just the <em>semantics</em> are. So I&#39;d say go ahead and copy paste.</p>
<p>Essentially we&#39;ve just narrowed down what we want our MCP server to do, added some strong opinions to it, and called it good. Instead of being able to have any tag be added on the fly, we&#39;re just allowing bugs and feature requests to be filed. Instead of worrying about users, we&#39;re letting it just be unassigned. This is less flexible, but after playing with it with a very small model for a while, I&#39;ve had 0 errors, as opposed to the probably 60% error rate I had with the API based tools.</p>
<blockquote>
<p>A note here: <em>sampling</em> like we talked about here would be super helpful. I&#39;d implement the tags and the users as sampling. I&#39;d request all the available tags and users then I&#39;d have the LLM choose the correct tags/users to apply. Elicitation could be good too - let the user choose - but if it&#39;s going to be an obvious answer then the LLM might as well do it.</p>
</blockquote>
<p>And that&#39;s our project!!</p>
</div><div class="lesson-links"><a href="/lessons/our-project/api-based-tools" class="prev">‚Üê Previous</a><a href="/lessons/sses-and-streaming-html/server-side-events" class="next">Next ‚Üí</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/holtbt"><svg fill="none" height="100%" width="32" xmlns="http://www.w3.org/2000/svg" viewBox="0.254 0.25 500 451.95400000000006"><path d="M394.033.25h76.67L303.202 191.693l197.052 260.511h-154.29L225.118 294.205 86.844 452.204H10.127l179.16-204.77L.254.25H158.46l109.234 144.417zm-26.908 406.063h42.483L135.377 43.73h-45.59z" fill="var(--footer-icons)"></path></svg></a></li><li class="social"><a href="https://bsky.app/profile/brianholt.me"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -3.268 64 68.414" width="38" height="100%"><path fill="var(--footer-icons)" d="M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022 0 8.51 0 6.55 0-3.268 8.579-.182 13.873 3.805zm36.254 0C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745z"></path></svg></a></li><li class="social"><a href="https://github.com/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Exercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul><div class="theme-icons"><button aria-label="Activate dark mode" title="Activate dark mode" class="theme-toggle"><svg xmlns="http://www.w3.org/2000/svg" width="36px" height="100%" viewBox="0 -960 960 960" fill="var(--text-footer)" role="img"><title>Dark Mode Icon</title><path d="M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Z"></path></svg></button></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"description":"Brian Holt presents a practical, jobs-oriented MCP server from the Complete Intro to MCP course, illustrating how to implement three focused actions with the Model Context Protocol: create high-priority bugs, create low-priority feature requests, and update ticket status. The piece includes JavaScript code for a minimal MCP server and discusses reliability over flexibility using real-world tool selection inspired by Qwen3.6B experiments.","keywords":["mcp","model context protocol","ai agents","bug tracking","ticket status update","Brian Holt","Complete Intro to MCP"]},"html":"\u003cp\u003eHere\u0026#39;s a real interaction using the complete MCP server I just had with Qwen3:0.6B.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\u003cbutton class=\"copy-btn\"\u003eCopy\u003c/button\u003e\u0026gt; üë§ using the issues-tracker-server mcp server, create a new issue in my issue tracker that tracks that I need to fix the login bug and mark it urgent and assign it to me. use the api key \u0026lt;API_KEY\u0026gt;\n\n\u0026gt; ü§ñ The tool call was made with the assigned_user_id set to \u0026quot;me\u0026quot;, but the system is rejecting this, indicating a mismatch. The error suggests that the assigned user ID \u0026quot;me\u0026quot; does not exist in the system. Could you confirm that your assigned user ID is correctly set to \u0026quot;your-own-id\u0026quot; instead? Let me know, and I\u0026#x27;ll assist accordingly\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis is where just mapping your API server to an MCP server runs into trouble.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSequential calls are hard to get right. In this case it\u0026#39;d need to use the API key to try to figure out who you are, then call create issue with that ID.\u003c/li\u003e\n\u003cli\u003eGiving a agent lots of tools may mean that it can be more flexible but it also leads to confusion. Just by including the health check, it will call it at unexpected times! Agents will make weird, questionable, or even downright-wrong decisions with which tool to use. A smaller set of focused tools is much more likely to succeed.\u003c/li\u003e\n\u003cli\u003eGenerally speaking, you know the few actions you want your model to take. It\u0026#39;s better to just codify these and slowly add more actions later.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eI\u0026#39;m going to call this \u0026quot;jobs oriented\u0026quot; MCP server as opposed to \u0026quot;API oriented\u0026quot;. I made up these terms. But it suits what we\u0026#39;re trying to get done today.\u003c/p\u003e\n\u003cp\u003eInstead of having our infinitely flexible API server and hoping the LLM chooses right, let\u0026#39;s say we know we really only want our MCP server to do three things:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eCreate new bugs and mark them as high priority\u003c/li\u003e\n\u003cli\u003eCreate new feature request and mark them as low priority\u003c/li\u003e\n\u003cli\u003eUpdate the status of a ticket\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eFrankly, after writing these, they aren\u0026#39;t that different. But man, the difference in success particularly with Qwen3:.6 is \u003cstrong\u003enight\u003c/strong\u003e and \u003cstrong\u003eday\u003c/strong\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cbutton class=\"copy-btn\"\u003eCopy\u003c/button\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { z } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;zod\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ejobsBasedTools\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eserver\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eAPI_BASE_URL\u003c/span\u003e = process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eAPI_BASE_URL\u003c/span\u003e || \u003cspan class=\"hljs-string\"\u003e\u0026quot;http://localhost:3000/api\u0026quot;\u003c/span\u003e;\n\n  \u003cspan class=\"hljs-comment\"\u003e// Hardcoded tag IDs from database\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eBUG_TAG_ID\u003c/span\u003e = \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eFEATURE_TAG_ID\u003c/span\u003e = \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e; \u003cspan class=\"hljs-comment\"\u003e// Helper function to make HTTP requests\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003emakeRequest\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003emethod, url, data = \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e, options = {}\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e config = {\n      method,\n      \u003cspan class=\"hljs-attr\"\u003eheaders\u003c/span\u003e: {\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;Content-Type\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json\u0026quot;\u003c/span\u003e,\n        ...options.\u003cspan class=\"hljs-property\"\u003eheaders\u003c/span\u003e,\n      },\n    };\n\n    \u003cspan class=\"hljs-comment\"\u003e// Merge other options except headers (which we already handled)\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { \u003cspan class=\"hljs-attr\"\u003eheaders\u003c/span\u003e: _, ...otherOptions } = options;\n    \u003cspan class=\"hljs-title class_\"\u003eObject\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eassign\u003c/span\u003e(config, otherOptions);\n\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (data) {\n      config.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e = \u003cspan class=\"hljs-title class_\"\u003eJSON\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003estringify\u003c/span\u003e(data);\n    }\n\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e response = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efetch\u003c/span\u003e(url, config);\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e result = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e response.\u003cspan class=\"hljs-title function_\"\u003etext\u003c/span\u003e();\n\n      \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e jsonResult;\n      \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n        jsonResult = \u003cspan class=\"hljs-title class_\"\u003eJSON\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eparse\u003c/span\u003e(result);\n      } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e {\n        jsonResult = result;\n      }\n\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n        \u003cspan class=\"hljs-attr\"\u003estatus\u003c/span\u003e: response.\u003cspan class=\"hljs-property\"\u003estatus\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: jsonResult,\n        \u003cspan class=\"hljs-attr\"\u003eheaders\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eObject\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efromEntries\u003c/span\u003e(response.\u003cspan class=\"hljs-property\"\u003eheaders\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eentries\u003c/span\u003e()),\n      };\n    } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n        \u003cspan class=\"hljs-attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: error.\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e,\n      };\n    }\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e// Tool 1: Create new bug with high priority\u003c/span\u003e\n  server.\u003cspan class=\"hljs-title function_\"\u003eregisterTool\u003c/span\u003e(\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;create-bug\u0026quot;\u003c/span\u003e,\n    {\n      \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;Create High Priority Bug\u0026quot;\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003edescription\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;Create a new bug issue with high priority and bug tag\u0026quot;\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003einputSchema\u003c/span\u003e: {\n        \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e: z.\u003cspan class=\"hljs-title function_\"\u003estring\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Bug title\u0026quot;\u003c/span\u003e),\n        \u003cspan class=\"hljs-attr\"\u003edescription\u003c/span\u003e: z.\u003cspan class=\"hljs-title function_\"\u003estring\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Bug description\u0026quot;\u003c/span\u003e),\n        \u003cspan class=\"hljs-attr\"\u003eapiKey\u003c/span\u003e: z.\u003cspan class=\"hljs-title function_\"\u003estring\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;API key for authentication\u0026quot;\u003c/span\u003e),\n      },\n    },\n    \u003cspan class=\"hljs-title function_\"\u003easync\u003c/span\u003e (params) =\u0026gt; {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { apiKey, ...bugData } = params;\n\n      \u003cspan class=\"hljs-comment\"\u003e// Create bug with high priority and bug tag\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e issueData = {\n        ...bugData,\n        \u003cspan class=\"hljs-attr\"\u003epriority\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;high\u0026quot;\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;not_started\u0026quot;\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003etag_ids\u003c/span\u003e: [\u003cspan class=\"hljs-variable constant_\"\u003eBUG_TAG_ID\u003c/span\u003e], \u003cspan class=\"hljs-comment\"\u003e// Hardcoded bug tag ID\u003c/span\u003e\n      };\n\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e result = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003emakeRequest\u003c/span\u003e(\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;POST\u0026quot;\u003c/span\u003e,\n        \u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${API_BASE_URL}\u003c/span\u003e/issues`\u003c/span\u003e,\n        issueData,\n        { \u003cspan class=\"hljs-attr\"\u003eheaders\u003c/span\u003e: { \u003cspan class=\"hljs-string\"\u003e\u0026quot;x-api-key\u0026quot;\u003c/span\u003e: apiKey } }\n      );\n\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n        \u003cspan class=\"hljs-attr\"\u003econtent\u003c/span\u003e: [\n          {\n            \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;text\u0026quot;\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003etext\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eJSON\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003estringify\u003c/span\u003e(result, \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e),\n          },\n        ],\n      };\n    }\n  );\n\n  \u003cspan class=\"hljs-comment\"\u003e// Tool 2: Create new feature request with low priority\u003c/span\u003e\n  server.\u003cspan class=\"hljs-title function_\"\u003eregisterTool\u003c/span\u003e(\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;create-feature-request\u0026quot;\u003c/span\u003e,\n    {\n      \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;Create Low Priority Feature Request\u0026quot;\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003edescription\u003c/span\u003e:\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;Create a new feature request issue with low priority and feature tag\u0026quot;\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003einputSchema\u003c/span\u003e: {\n        \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e: z.\u003cspan class=\"hljs-title function_\"\u003estring\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Feature request title\u0026quot;\u003c/span\u003e),\n        \u003cspan class=\"hljs-attr\"\u003edescription\u003c/span\u003e: z.\u003cspan class=\"hljs-title function_\"\u003estring\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Feature request description\u0026quot;\u003c/span\u003e),\n        \u003cspan class=\"hljs-attr\"\u003eapiKey\u003c/span\u003e: z.\u003cspan class=\"hljs-title function_\"\u003estring\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;API key for authentication\u0026quot;\u003c/span\u003e),\n      },\n    },\n    \u003cspan class=\"hljs-title function_\"\u003easync\u003c/span\u003e (params) =\u0026gt; {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { apiKey, ...featureData } = params;\n\n      \u003cspan class=\"hljs-comment\"\u003e// Create feature request with low priority and feature tag\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e issueData = {\n        ...featureData,\n        \u003cspan class=\"hljs-attr\"\u003epriority\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;low\u0026quot;\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;not_started\u0026quot;\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003etag_ids\u003c/span\u003e: [\u003cspan class=\"hljs-variable constant_\"\u003eFEATURE_TAG_ID\u003c/span\u003e], \u003cspan class=\"hljs-comment\"\u003e// Hardcoded feature tag ID\u003c/span\u003e\n      };\n\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e result = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003emakeRequest\u003c/span\u003e(\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;POST\u0026quot;\u003c/span\u003e,\n        \u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${API_BASE_URL}\u003c/span\u003e/issues`\u003c/span\u003e,\n        issueData,\n        { \u003cspan class=\"hljs-attr\"\u003eheaders\u003c/span\u003e: { \u003cspan class=\"hljs-string\"\u003e\u0026quot;x-api-key\u0026quot;\u003c/span\u003e: apiKey } }\n      );\n\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n        \u003cspan class=\"hljs-attr\"\u003econtent\u003c/span\u003e: [\n          {\n            \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;text\u0026quot;\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003etext\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eJSON\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003estringify\u003c/span\u003e(result, \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e),\n          },\n        ],\n      };\n    }\n  );\n\n  \u003cspan class=\"hljs-comment\"\u003e// Tool 3: Update ticket status\u003c/span\u003e\n  server.\u003cspan class=\"hljs-title function_\"\u003eregisterTool\u003c/span\u003e(\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;update-ticket-status\u0026quot;\u003c/span\u003e,\n    {\n      \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;Update Ticket Status\u0026quot;\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003edescription\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;Update the status of an existing ticket/issue\u0026quot;\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003einputSchema\u003c/span\u003e: {\n        \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: z.\u003cspan class=\"hljs-title function_\"\u003enumber\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Issue ID to update\u0026quot;\u003c/span\u003e),\n        \u003cspan class=\"hljs-attr\"\u003estatus\u003c/span\u003e: z\n          .\u003cspan class=\"hljs-title function_\"\u003eenum\u003c/span\u003e([\u003cspan class=\"hljs-string\"\u003e\u0026quot;not_started\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;in_progress\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;done\u0026quot;\u003c/span\u003e])\n          .\u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;New status for the ticket\u0026quot;\u003c/span\u003e),\n        \u003cspan class=\"hljs-attr\"\u003eapiKey\u003c/span\u003e: z.\u003cspan class=\"hljs-title function_\"\u003estring\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;API key for authentication\u0026quot;\u003c/span\u003e),\n      },\n    },\n    \u003cspan class=\"hljs-title function_\"\u003easync\u003c/span\u003e (params) =\u0026gt; {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { id, status, apiKey } = params;\n\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e result = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003emakeRequest\u003c/span\u003e(\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;PUT\u0026quot;\u003c/span\u003e,\n        \u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${API_BASE_URL}\u003c/span\u003e/issues/\u003cspan class=\"hljs-subst\"\u003e${id}\u003c/span\u003e`\u003c/span\u003e,\n        { status },\n        { \u003cspan class=\"hljs-attr\"\u003eheaders\u003c/span\u003e: { \u003cspan class=\"hljs-string\"\u003e\u0026quot;x-api-key\u0026quot;\u003c/span\u003e: apiKey } }\n      );\n\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n        \u003cspan class=\"hljs-attr\"\u003econtent\u003c/span\u003e: [\n          {\n            \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;text\u0026quot;\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003etext\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eJSON\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003estringify\u003c/span\u003e(result, \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e),\n          },\n        ],\n      };\n    }\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eFeel free to type this out, but in reality the \u003cem\u003ecode\u003c/em\u003e isn\u0026#39;t very different, just the \u003cem\u003esemantics\u003c/em\u003e are. So I\u0026#39;d say go ahead and copy paste.\u003c/p\u003e\n\u003cp\u003eEssentially we\u0026#39;ve just narrowed down what we want our MCP server to do, added some strong opinions to it, and called it good. Instead of being able to have any tag be added on the fly, we\u0026#39;re just allowing bugs and feature requests to be filed. Instead of worrying about users, we\u0026#39;re letting it just be unassigned. This is less flexible, but after playing with it with a very small model for a while, I\u0026#39;ve had 0 errors, as opposed to the probably 60% error rate I had with the API based tools.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eA note here: \u003cem\u003esampling\u003c/em\u003e like we talked about here would be super helpful. I\u0026#39;d implement the tags and the users as sampling. I\u0026#39;d request all the available tags and users then I\u0026#39;d have the LLM choose the correct tags/users to apply. Elicitation could be good too - let the user choose - but if it\u0026#39;s going to be an obvious answer then the LLM might as well do it.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eAnd that\u0026#39;s our project!!\u003c/p\u003e\n","markdown":"\nHere's a real interaction using the complete MCP server I just had with Qwen3:0.6B.\n\n```\n\u003e üë§ using the issues-tracker-server mcp server, create a new issue in my issue tracker that tracks that I need to fix the login bug and mark it urgent and assign it to me. use the api key \u003cAPI_KEY\u003e\n\n\u003e ü§ñ The tool call was made with the assigned_user_id set to \"me\", but the system is rejecting this, indicating a mismatch. The error suggests that the assigned user ID \"me\" does not exist in the system. Could you confirm that your assigned user ID is correctly set to \"your-own-id\" instead? Let me know, and I'll assist accordingly\n```\n\nThis is where just mapping your API server to an MCP server runs into trouble.\n\n- Sequential calls are hard to get right. In this case it'd need to use the API key to try to figure out who you are, then call create issue with that ID.\n- Giving a agent lots of tools may mean that it can be more flexible but it also leads to confusion. Just by including the health check, it will call it at unexpected times! Agents will make weird, questionable, or even downright-wrong decisions with which tool to use. A smaller set of focused tools is much more likely to succeed.\n- Generally speaking, you know the few actions you want your model to take. It's better to just codify these and slowly add more actions later.\n\nI'm going to call this \"jobs oriented\" MCP server as opposed to \"API oriented\". I made up these terms. But it suits what we're trying to get done today.\n\nInstead of having our infinitely flexible API server and hoping the LLM chooses right, let's say we know we really only want our MCP server to do three things:\n\n- Create new bugs and mark them as high priority\n- Create new feature request and mark them as low priority\n- Update the status of a ticket\n\nFrankly, after writing these, they aren't that different. But man, the difference in success particularly with Qwen3:.6 is **night** and **day**.\n\n```javascript\nimport { z } from \"zod\";\n\nexport default function jobsBasedTools(server) {\n  const API_BASE_URL = process.env.API_BASE_URL || \"http://localhost:3000/api\";\n\n  // Hardcoded tag IDs from database\n  const BUG_TAG_ID = 3;\n  const FEATURE_TAG_ID = 4; // Helper function to make HTTP requests\n  async function makeRequest(method, url, data = null, options = {}) {\n    const config = {\n      method,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...options.headers,\n      },\n    };\n\n    // Merge other options except headers (which we already handled)\n    const { headers: _, ...otherOptions } = options;\n    Object.assign(config, otherOptions);\n\n    if (data) {\n      config.body = JSON.stringify(data);\n    }\n\n    try {\n      const response = await fetch(url, config);\n      const result = await response.text();\n\n      let jsonResult;\n      try {\n        jsonResult = JSON.parse(result);\n      } catch {\n        jsonResult = result;\n      }\n\n      return {\n        status: response.status,\n        data: jsonResult,\n        headers: Object.fromEntries(response.headers.entries()),\n      };\n    } catch (error) {\n      return {\n        status: 0,\n        error: error.message,\n      };\n    }\n  }\n\n  // Tool 1: Create new bug with high priority\n  server.registerTool(\n    \"create-bug\",\n    {\n      title: \"Create High Priority Bug\",\n      description: \"Create a new bug issue with high priority and bug tag\",\n      inputSchema: {\n        title: z.string().describe(\"Bug title\"),\n        description: z.string().describe(\"Bug description\"),\n        apiKey: z.string().describe(\"API key for authentication\"),\n      },\n    },\n    async (params) =\u003e {\n      const { apiKey, ...bugData } = params;\n\n      // Create bug with high priority and bug tag\n      const issueData = {\n        ...bugData,\n        priority: \"high\",\n        status: \"not_started\",\n        tag_ids: [BUG_TAG_ID], // Hardcoded bug tag ID\n      };\n\n      const result = await makeRequest(\n        \"POST\",\n        `${API_BASE_URL}/issues`,\n        issueData,\n        { headers: { \"x-api-key\": apiKey } }\n      );\n\n      return {\n        content: [\n          {\n            type: \"text\",\n            text: JSON.stringify(result, null, 2),\n          },\n        ],\n      };\n    }\n  );\n\n  // Tool 2: Create new feature request with low priority\n  server.registerTool(\n    \"create-feature-request\",\n    {\n      title: \"Create Low Priority Feature Request\",\n      description:\n        \"Create a new feature request issue with low priority and feature tag\",\n      inputSchema: {\n        title: z.string().describe(\"Feature request title\"),\n        description: z.string().describe(\"Feature request description\"),\n        apiKey: z.string().describe(\"API key for authentication\"),\n      },\n    },\n    async (params) =\u003e {\n      const { apiKey, ...featureData } = params;\n\n      // Create feature request with low priority and feature tag\n      const issueData = {\n        ...featureData,\n        priority: \"low\",\n        status: \"not_started\",\n        tag_ids: [FEATURE_TAG_ID], // Hardcoded feature tag ID\n      };\n\n      const result = await makeRequest(\n        \"POST\",\n        `${API_BASE_URL}/issues`,\n        issueData,\n        { headers: { \"x-api-key\": apiKey } }\n      );\n\n      return {\n        content: [\n          {\n            type: \"text\",\n            text: JSON.stringify(result, null, 2),\n          },\n        ],\n      };\n    }\n  );\n\n  // Tool 3: Update ticket status\n  server.registerTool(\n    \"update-ticket-status\",\n    {\n      title: \"Update Ticket Status\",\n      description: \"Update the status of an existing ticket/issue\",\n      inputSchema: {\n        id: z.number().describe(\"Issue ID to update\"),\n        status: z\n          .enum([\"not_started\", \"in_progress\", \"done\"])\n          .describe(\"New status for the ticket\"),\n        apiKey: z.string().describe(\"API key for authentication\"),\n      },\n    },\n    async (params) =\u003e {\n      const { id, status, apiKey } = params;\n\n      const result = await makeRequest(\n        \"PUT\",\n        `${API_BASE_URL}/issues/${id}`,\n        { status },\n        { headers: { \"x-api-key\": apiKey } }\n      );\n\n      return {\n        content: [\n          {\n            type: \"text\",\n            text: JSON.stringify(result, null, 2),\n          },\n        ],\n      };\n    }\n  );\n}\n```\n\nFeel free to type this out, but in reality the _code_ isn't very different, just the _semantics_ are. So I'd say go ahead and copy paste.\n\nEssentially we've just narrowed down what we want our MCP server to do, added some strong opinions to it, and called it good. Instead of being able to have any tag be added on the fly, we're just allowing bugs and feature requests to be filed. Instead of worrying about users, we're letting it just be unassigned. This is less flexible, but after playing with it with a very small model for a while, I've had 0 errors, as opposed to the probably 60% error rate I had with the API based tools.\n\n\u003e A note here: _sampling_ like we talked about here would be super helpful. I'd implement the tags and the users as sampling. I'd request all the available tags and users then I'd have the LLM choose the correct tags/users to apply. Elicitation could be good too - let the user choose - but if it's going to be an obvious answer then the LLM might as well do it.\n\nAnd that's our project!!\n","slug":"jobs-based-tools","title":"Jobs Based Tools","section":"Our Project","icon":"screwdriver-wrench","filePath":"/home/runner/work/complete-intro-to-mcp/complete-intro-to-mcp/lessons/05-our-project/c-jobs-based-tools.md","nextSlug":"/lessons/sses-and-streaming-html/server-side-events","prevSlug":"/lessons/our-project/api-based-tools"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"our-project","slug":"jobs-based-tools"},"buildId":"G_slUKxNBRf2cik66oGLY","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>