<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png" data-next-head=""/><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png" data-next-head=""/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png" data-next-head=""/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png" data-next-head=""/><link rel="icon" type="image/x-icon" href="/images/favicon.ico" data-next-head=""/><title data-next-head="">Api Based Tools – Complete Intro to MCP</title><meta name="description" content="Brian Holt&#x27;s Complete Intro to MCP tutorial dives into the &#x27;wrong way&#x27; of mapping each API call to an MCP tool within an issue-tracker app, then shows how to build reusable MCP tools like &#x27;Create Issue&#x27; and &#x27;List Tags&#x27; with clear input schemas and API-key handling. It includes practical code snippets, integration steps for Claude Desktop or other agents, and guidance on testing and scaling MCP workflows." data-next-head=""/><meta name="keywords" content="MCP,Model Context Protocol,AI tools,Issue tracker,API key,Brian Holt,Frontend Masters" data-next-head=""/><meta name="og:description" content="Brian Holt&#x27;s Complete Intro to MCP tutorial dives into the &#x27;wrong way&#x27; of mapping each API call to an MCP tool within an issue-tracker app, then shows how to build reusable MCP tools like &#x27;Create Issue&#x27; and &#x27;List Tags&#x27; with clear input schemas and API-key handling. It includes practical code snippets, integration steps for Claude Desktop or other agents, and guidance on testing and scaling MCP workflows." data-next-head=""/><meta name="og:title" content="Api Based Tools – Complete Intro to MCP" data-next-head=""/><meta name="og:image" content="/images/social-share-cover.jpg" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><link data-next-font="size-adjust" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/086f6a648d0d9276.css" as="style"/><link rel="stylesheet" href="/_next/static/css/086f6a648d0d9276.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-b66ed8ba6f029a99.js" defer=""></script><script src="/_next/static/chunks/framework-2f335d22a7318891.js" defer=""></script><script src="/_next/static/chunks/main-00b4e1227fd2aa8a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-b9f8acf1434dd4b3.js" defer=""></script><script src="/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-2115f22e4e476f99.js" defer=""></script><script src="/_next/static/3Mg5_eXgxRUcnLOJp0h8Y/_buildManifest.js" defer=""></script><script src="/_next/static/3Mg5_eXgxRUcnLOJp0h8Y/_ssgManifest.js" defer=""></script></head><body><script async="" defer="" src="https://a.holt.courses/latest.js"></script><div id="__next"><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/">Complete Intro to MCP</a></h1><div class="navbar-info"><a href="https://frontendmasters.com/courses/mcp/" class="cta-btn">Watch on Frontend Masters</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><p>So let&#39;s start with what I would call the wrong way of doing MCP – a one-to-one mapping of an API call to an MCP tool. Our issue tracker has about 15ish API calls, we&#39;re going to make each one into a tool. We&#39;ll get into why this could be a bad call but for now, it&#39;s the simplest conceptually to grasp so let&#39;s go do that. Or rather, I&#39;m going to make you actually write the code for one and then let you copy/paste the rest. Feel free to do the whole thing, it&#39;s just a lot of code of doing the same thing.</p>
<p>First, let&#39;s familiarize ourselves with the codebase in the Issues Tracker app. <a href="https://github.com/btholt/mcp-issue-tracker?tab=readme-ov-file#api-documentation">The code is here on GitHub</a>, specifically the API documentation. Let&#39;s skip making the auth headers - it&#39;s too easy to prove my point. Getting an agent to successfully sign up and then manage a session just never worked for me, even when I was really trying to. So I made it so you can just nab a valid API key from the frontend. Sign up as a user and click &quot;copy API key&quot; from the header.</p>
<blockquote>
<p>🚨 In the name of simplicity, I made it so every user can only ever have one valid API key at a time. If you click &quot;copy API key&quot; again, it&#39;ll generate a new one and copy it to your clipboard, meaning if you were using that API key elsewhere, it&#39;s now invalid. I didn&#39;t want to make a whole key management system.</p>
</blockquote>
<p>So let&#39;s implement a tool to create issues.</p>
<pre><code class="hljs language-javascript"><button class="copy-btn">Copy</button><span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;zod&quot;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">apiBasedTools</span>(<span class="hljs-params">server</span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">API_BASE_URL</span> = process.<span class="hljs-property">env</span>.<span class="hljs-property">API_BASE_URL</span> || <span class="hljs-string">&quot;http://localhost:3000/api&quot;</span>;

  <span class="hljs-comment">// Helper function to make HTTP requests</span>
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">makeRequest</span>(<span class="hljs-params">method, url, data = <span class="hljs-literal">null</span>, options = {}</span>) {
    <span class="hljs-keyword">const</span> config = {
      method,
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/json&quot;</span>,
        ...options.<span class="hljs-property">headers</span>,
      },
    };

    <span class="hljs-comment">// Merge other options except headers (which we already handled)</span>
    <span class="hljs-keyword">const</span> { <span class="hljs-attr">headers</span>: _, ...otherOptions } = options;
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(config, otherOptions);

    <span class="hljs-keyword">if</span> (data) {
      config.<span class="hljs-property">body</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data);
    }

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, config);
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">text</span>();

      <span class="hljs-keyword">let</span> jsonResult;
      <span class="hljs-keyword">try</span> {
        jsonResult = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(result);
      } <span class="hljs-keyword">catch</span> {
        jsonResult = result;
      }

      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">status</span>: response.<span class="hljs-property">status</span>,
        <span class="hljs-attr">data</span>: jsonResult,
        <span class="hljs-attr">headers</span>: <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">entries</span>()),
      };
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">status</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span>,
      };
    }
  }
  server.<span class="hljs-title function_">registerTool</span>(
    <span class="hljs-string">&quot;issues-create&quot;</span>,
    {
      <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;Create Issue&quot;</span>,
      <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;Create a new issue&quot;</span>,
      <span class="hljs-attr">inputSchema</span>: {
        <span class="hljs-attr">title</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;Issue title&quot;</span>),
        <span class="hljs-attr">description</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">optional</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;Issue description&quot;</span>),
        <span class="hljs-attr">status</span>: z
          .<span class="hljs-title function_">enum</span>([<span class="hljs-string">&quot;not_started&quot;</span>, <span class="hljs-string">&quot;in_progress&quot;</span>, <span class="hljs-string">&quot;done&quot;</span>])
          .<span class="hljs-title function_">optional</span>()
          .<span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;Issue status&quot;</span>),
        <span class="hljs-attr">priority</span>: z
          .<span class="hljs-title function_">enum</span>([<span class="hljs-string">&quot;low&quot;</span>, <span class="hljs-string">&quot;medium&quot;</span>, <span class="hljs-string">&quot;high&quot;</span>, <span class="hljs-string">&quot;urgent&quot;</span>])
          .<span class="hljs-title function_">optional</span>()
          .<span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;Issue priority&quot;</span>),
        <span class="hljs-attr">assigned_user_id</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">optional</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;Assigned user ID&quot;</span>),
        <span class="hljs-attr">tag_ids</span>: z.<span class="hljs-title function_">array</span>(z.<span class="hljs-title function_">number</span>()).<span class="hljs-title function_">optional</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;Array of tag IDs&quot;</span>),
        <span class="hljs-attr">apiKey</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;API key for authentication&quot;</span>),
      },
    },
    <span class="hljs-title function_">async</span> (params) =&gt; {
      <span class="hljs-keyword">const</span> { apiKey, ...issueData } = params;

      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">makeRequest</span>(
        <span class="hljs-string">&quot;POST&quot;</span>,
        <span class="hljs-string">`<span class="hljs-subst">${API_BASE_URL}</span>/issues`</span>,
        issueData,
        { <span class="hljs-attr">headers</span>: { <span class="hljs-string">&quot;x-api-key&quot;</span>: apiKey } }
      );

      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">content</span>: [
          {
            <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;text&quot;</span>,
            <span class="hljs-attr">text</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(result, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>),
          },
        ],
      };
    }
  );
}
</code></pre><p>Pretty straight forward. The zod types both make it very readable to use and it&#39;s what the LLM is going to use to decide what to put where. Let&#39;s add one more to list all tags.</p>
<p>We made this into a function that we can then import into our main.js and use. So back there and add this</p>
<pre><code class="hljs language-javascript"><button class="copy-btn">Copy</button><span class="hljs-comment">// at top</span>
<span class="hljs-keyword">import</span> apiBasedTools <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./api-based-tools.js&quot;</span>;

<span class="hljs-comment">// under new McpServer</span>
<span class="hljs-title function_">apiBasedTools</span>(server);
</code></pre><p>Make sure you&#39;ve added this MCP server to your Claude Desktop / Tome, restart it, and then try the prompt</p>
<pre><code><button class="copy-btn">Copy</button>Create a new issue in my issue tracker that says &quot;Add Google login to my app&quot;, mark it as in progress, and mark it as medium priority. Here is my API key: &lt;YOUR API KEY&gt;
</code></pre><p>Okay, let&#39;s take it a step further. Let&#39;s say we want to be able to add tags to it. Right now if you say &quot;mark it as a bug&quot; it will try to put &quot;bug&quot; as the tag ID but the tag ID is a number. So the user either needs to know that &quot;bug&quot; is tag ID ## or it just won&#39;t work. Let&#39;s add a tool for that.</p>
<p>Add this tool.</p>
<pre><code class="hljs language-javascript"><button class="copy-btn">Copy</button>server.<span class="hljs-title function_">registerTool</span>(
  <span class="hljs-string">&quot;tags-list&quot;</span>,
  {
    <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;List Tags&quot;</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;Get all available tags&quot;</span>,
    <span class="hljs-attr">inputSchema</span>: {
      <span class="hljs-attr">apiKey</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;API key for authentication&quot;</span>),
    },
  },
  <span class="hljs-title function_">async</span> ({ apiKey }) =&gt; {
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">makeRequest</span>(<span class="hljs-string">&quot;GET&quot;</span>, <span class="hljs-string">`<span class="hljs-subst">${API_BASE_URL}</span>/tags`</span>, <span class="hljs-literal">null</span>, {
      <span class="hljs-attr">headers</span>: { <span class="hljs-string">&quot;x-api-key&quot;</span>: apiKey },
    });

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">content</span>: [
        {
          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;text&quot;</span>,
          <span class="hljs-attr">text</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(result, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>),
        },
      ],
    };
  }
);
</code></pre><p>Now try</p>
<pre><code><button class="copy-btn">Copy</button>Create a new issue in my issue tracker that says &quot;Add Microsoft login to my app&quot;, mark it as not started, and mark it as urgent priority. Add the tags frontend and feature. Here is my API key: &lt;YOUR API KEY&gt;
</code></pre><p>Now, if you&#39;re using Claude Desktop, this will probably work. If you&#39;re using Qwen3:0.6B, well, flip a coin. I&#39;ve had a hard time to get the smallest Qwen 3 model to do anything more than one step.</p>
<p>Once you feel okay with that, go head and change the import in main.js to import from the complete file</p>
<pre><code class="hljs language-javascript"><button class="copy-btn">Copy</button><span class="hljs-keyword">import</span> apiBasedTools <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./api-based-tools-complete.js&quot;</span>; <span class="hljs-comment">// add complete at the end</span>
</code></pre><p>Now you have all API endpoints available. Feel free to try very complex workflows and see how you do.</p>
<p>For me, Claude 4 Sonnet did surprisingly well, only tripping up in a few cases where it shouldn&#39;t have after some extensive testing. But the smaller Qwen models were constantly getting it wrong.</p>
</div><div class="lesson-links"><a href="/lessons/our-project/mcp-server-design" class="prev">← Previous</a><a href="/lessons/our-project/jobs-based-tools" class="next">Next →</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/holtbt"><svg fill="none" height="100%" width="32" xmlns="http://www.w3.org/2000/svg" viewBox="0.254 0.25 500 451.95400000000006"><path d="M394.033.25h76.67L303.202 191.693l197.052 260.511h-154.29L225.118 294.205 86.844 452.204H10.127l179.16-204.77L.254.25H158.46l109.234 144.417zm-26.908 406.063h42.483L135.377 43.73h-45.59z" fill="var(--footer-icons)"></path></svg></a></li><li class="social"><a href="https://bsky.app/profile/brianholt.me"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -3.268 64 68.414" width="38" height="100%"><path fill="var(--footer-icons)" d="M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022 0 8.51 0 6.55 0-3.268 8.579-.182 13.873 3.805zm36.254 0C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745z"></path></svg></a></li><li class="social"><a href="https://github.com/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Exercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul><div class="theme-icons"><button aria-label="Activate dark mode" title="Activate dark mode" class="theme-toggle"><svg xmlns="http://www.w3.org/2000/svg" width="36px" height="100%" viewBox="0 -960 960 960" fill="var(--text-footer)" role="img"><title>Dark Mode Icon</title><path d="M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Z"></path></svg></button></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"description":"Brian Holt's Complete Intro to MCP tutorial dives into the 'wrong way' of mapping each API call to an MCP tool within an issue-tracker app, then shows how to build reusable MCP tools like 'Create Issue' and 'List Tags' with clear input schemas and API-key handling. It includes practical code snippets, integration steps for Claude Desktop or other agents, and guidance on testing and scaling MCP workflows.","keywords":["MCP","Model Context Protocol","AI tools","Issue tracker","API key","Brian Holt","Frontend Masters"]},"html":"\u003cp\u003eSo let\u0026#39;s start with what I would call the wrong way of doing MCP – a one-to-one mapping of an API call to an MCP tool. Our issue tracker has about 15ish API calls, we\u0026#39;re going to make each one into a tool. We\u0026#39;ll get into why this could be a bad call but for now, it\u0026#39;s the simplest conceptually to grasp so let\u0026#39;s go do that. Or rather, I\u0026#39;m going to make you actually write the code for one and then let you copy/paste the rest. Feel free to do the whole thing, it\u0026#39;s just a lot of code of doing the same thing.\u003c/p\u003e\n\u003cp\u003eFirst, let\u0026#39;s familiarize ourselves with the codebase in the Issues Tracker app. \u003ca href=\"https://github.com/btholt/mcp-issue-tracker?tab=readme-ov-file#api-documentation\"\u003eThe code is here on GitHub\u003c/a\u003e, specifically the API documentation. Let\u0026#39;s skip making the auth headers - it\u0026#39;s too easy to prove my point. Getting an agent to successfully sign up and then manage a session just never worked for me, even when I was really trying to. So I made it so you can just nab a valid API key from the frontend. Sign up as a user and click \u0026quot;copy API key\u0026quot; from the header.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e🚨 In the name of simplicity, I made it so every user can only ever have one valid API key at a time. If you click \u0026quot;copy API key\u0026quot; again, it\u0026#39;ll generate a new one and copy it to your clipboard, meaning if you were using that API key elsewhere, it\u0026#39;s now invalid. I didn\u0026#39;t want to make a whole key management system.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eSo let\u0026#39;s implement a tool to create issues.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cbutton class=\"copy-btn\"\u003eCopy\u003c/button\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { z } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;zod\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eapiBasedTools\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eserver\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eAPI_BASE_URL\u003c/span\u003e = process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eAPI_BASE_URL\u003c/span\u003e || \u003cspan class=\"hljs-string\"\u003e\u0026quot;http://localhost:3000/api\u0026quot;\u003c/span\u003e;\n\n  \u003cspan class=\"hljs-comment\"\u003e// Helper function to make HTTP requests\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003emakeRequest\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003emethod, url, data = \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e, options = {}\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e config = {\n      method,\n      \u003cspan class=\"hljs-attr\"\u003eheaders\u003c/span\u003e: {\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;Content-Type\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json\u0026quot;\u003c/span\u003e,\n        ...options.\u003cspan class=\"hljs-property\"\u003eheaders\u003c/span\u003e,\n      },\n    };\n\n    \u003cspan class=\"hljs-comment\"\u003e// Merge other options except headers (which we already handled)\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { \u003cspan class=\"hljs-attr\"\u003eheaders\u003c/span\u003e: _, ...otherOptions } = options;\n    \u003cspan class=\"hljs-title class_\"\u003eObject\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eassign\u003c/span\u003e(config, otherOptions);\n\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (data) {\n      config.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e = \u003cspan class=\"hljs-title class_\"\u003eJSON\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003estringify\u003c/span\u003e(data);\n    }\n\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e response = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efetch\u003c/span\u003e(url, config);\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e result = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e response.\u003cspan class=\"hljs-title function_\"\u003etext\u003c/span\u003e();\n\n      \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e jsonResult;\n      \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n        jsonResult = \u003cspan class=\"hljs-title class_\"\u003eJSON\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eparse\u003c/span\u003e(result);\n      } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e {\n        jsonResult = result;\n      }\n\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n        \u003cspan class=\"hljs-attr\"\u003estatus\u003c/span\u003e: response.\u003cspan class=\"hljs-property\"\u003estatus\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: jsonResult,\n        \u003cspan class=\"hljs-attr\"\u003eheaders\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eObject\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efromEntries\u003c/span\u003e(response.\u003cspan class=\"hljs-property\"\u003eheaders\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eentries\u003c/span\u003e()),\n      };\n    } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n        \u003cspan class=\"hljs-attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: error.\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e,\n      };\n    }\n  }\n  server.\u003cspan class=\"hljs-title function_\"\u003eregisterTool\u003c/span\u003e(\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;issues-create\u0026quot;\u003c/span\u003e,\n    {\n      \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;Create Issue\u0026quot;\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003edescription\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;Create a new issue\u0026quot;\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003einputSchema\u003c/span\u003e: {\n        \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e: z.\u003cspan class=\"hljs-title function_\"\u003estring\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Issue title\u0026quot;\u003c/span\u003e),\n        \u003cspan class=\"hljs-attr\"\u003edescription\u003c/span\u003e: z.\u003cspan class=\"hljs-title function_\"\u003estring\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003eoptional\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Issue description\u0026quot;\u003c/span\u003e),\n        \u003cspan class=\"hljs-attr\"\u003estatus\u003c/span\u003e: z\n          .\u003cspan class=\"hljs-title function_\"\u003eenum\u003c/span\u003e([\u003cspan class=\"hljs-string\"\u003e\u0026quot;not_started\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;in_progress\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;done\u0026quot;\u003c/span\u003e])\n          .\u003cspan class=\"hljs-title function_\"\u003eoptional\u003c/span\u003e()\n          .\u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Issue status\u0026quot;\u003c/span\u003e),\n        \u003cspan class=\"hljs-attr\"\u003epriority\u003c/span\u003e: z\n          .\u003cspan class=\"hljs-title function_\"\u003eenum\u003c/span\u003e([\u003cspan class=\"hljs-string\"\u003e\u0026quot;low\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;medium\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;high\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;urgent\u0026quot;\u003c/span\u003e])\n          .\u003cspan class=\"hljs-title function_\"\u003eoptional\u003c/span\u003e()\n          .\u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Issue priority\u0026quot;\u003c/span\u003e),\n        \u003cspan class=\"hljs-attr\"\u003eassigned_user_id\u003c/span\u003e: z.\u003cspan class=\"hljs-title function_\"\u003estring\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003eoptional\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Assigned user ID\u0026quot;\u003c/span\u003e),\n        \u003cspan class=\"hljs-attr\"\u003etag_ids\u003c/span\u003e: z.\u003cspan class=\"hljs-title function_\"\u003earray\u003c/span\u003e(z.\u003cspan class=\"hljs-title function_\"\u003enumber\u003c/span\u003e()).\u003cspan class=\"hljs-title function_\"\u003eoptional\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Array of tag IDs\u0026quot;\u003c/span\u003e),\n        \u003cspan class=\"hljs-attr\"\u003eapiKey\u003c/span\u003e: z.\u003cspan class=\"hljs-title function_\"\u003estring\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;API key for authentication\u0026quot;\u003c/span\u003e),\n      },\n    },\n    \u003cspan class=\"hljs-title function_\"\u003easync\u003c/span\u003e (params) =\u0026gt; {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { apiKey, ...issueData } = params;\n\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e result = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003emakeRequest\u003c/span\u003e(\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;POST\u0026quot;\u003c/span\u003e,\n        \u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${API_BASE_URL}\u003c/span\u003e/issues`\u003c/span\u003e,\n        issueData,\n        { \u003cspan class=\"hljs-attr\"\u003eheaders\u003c/span\u003e: { \u003cspan class=\"hljs-string\"\u003e\u0026quot;x-api-key\u0026quot;\u003c/span\u003e: apiKey } }\n      );\n\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n        \u003cspan class=\"hljs-attr\"\u003econtent\u003c/span\u003e: [\n          {\n            \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;text\u0026quot;\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003etext\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eJSON\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003estringify\u003c/span\u003e(result, \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e),\n          },\n        ],\n      };\n    }\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003ePretty straight forward. The zod types both make it very readable to use and it\u0026#39;s what the LLM is going to use to decide what to put where. Let\u0026#39;s add one more to list all tags.\u003c/p\u003e\n\u003cp\u003eWe made this into a function that we can then import into our main.js and use. So back there and add this\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cbutton class=\"copy-btn\"\u003eCopy\u003c/button\u003e\u003cspan class=\"hljs-comment\"\u003e// at top\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e apiBasedTools \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;./api-based-tools.js\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// under new McpServer\u003c/span\u003e\n\u003cspan class=\"hljs-title function_\"\u003eapiBasedTools\u003c/span\u003e(server);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eMake sure you\u0026#39;ve added this MCP server to your Claude Desktop / Tome, restart it, and then try the prompt\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\u003cbutton class=\"copy-btn\"\u003eCopy\u003c/button\u003eCreate a new issue in my issue tracker that says \u0026quot;Add Google login to my app\u0026quot;, mark it as in progress, and mark it as medium priority. Here is my API key: \u0026lt;YOUR API KEY\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eOkay, let\u0026#39;s take it a step further. Let\u0026#39;s say we want to be able to add tags to it. Right now if you say \u0026quot;mark it as a bug\u0026quot; it will try to put \u0026quot;bug\u0026quot; as the tag ID but the tag ID is a number. So the user either needs to know that \u0026quot;bug\u0026quot; is tag ID ## or it just won\u0026#39;t work. Let\u0026#39;s add a tool for that.\u003c/p\u003e\n\u003cp\u003eAdd this tool.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cbutton class=\"copy-btn\"\u003eCopy\u003c/button\u003eserver.\u003cspan class=\"hljs-title function_\"\u003eregisterTool\u003c/span\u003e(\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;tags-list\u0026quot;\u003c/span\u003e,\n  {\n    \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;List Tags\u0026quot;\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003edescription\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;Get all available tags\u0026quot;\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003einputSchema\u003c/span\u003e: {\n      \u003cspan class=\"hljs-attr\"\u003eapiKey\u003c/span\u003e: z.\u003cspan class=\"hljs-title function_\"\u003estring\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003edescribe\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;API key for authentication\u0026quot;\u003c/span\u003e),\n    },\n  },\n  \u003cspan class=\"hljs-title function_\"\u003easync\u003c/span\u003e ({ apiKey }) =\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e result = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003emakeRequest\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;GET\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${API_BASE_URL}\u003c/span\u003e/tags`\u003c/span\u003e, \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e, {\n      \u003cspan class=\"hljs-attr\"\u003eheaders\u003c/span\u003e: { \u003cspan class=\"hljs-string\"\u003e\u0026quot;x-api-key\u0026quot;\u003c/span\u003e: apiKey },\n    });\n\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n      \u003cspan class=\"hljs-attr\"\u003econtent\u003c/span\u003e: [\n        {\n          \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;text\u0026quot;\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr\"\u003etext\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eJSON\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003estringify\u003c/span\u003e(result, \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e),\n        },\n      ],\n    };\n  }\n);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNow try\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\u003cbutton class=\"copy-btn\"\u003eCopy\u003c/button\u003eCreate a new issue in my issue tracker that says \u0026quot;Add Microsoft login to my app\u0026quot;, mark it as not started, and mark it as urgent priority. Add the tags frontend and feature. Here is my API key: \u0026lt;YOUR API KEY\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNow, if you\u0026#39;re using Claude Desktop, this will probably work. If you\u0026#39;re using Qwen3:0.6B, well, flip a coin. I\u0026#39;ve had a hard time to get the smallest Qwen 3 model to do anything more than one step.\u003c/p\u003e\n\u003cp\u003eOnce you feel okay with that, go head and change the import in main.js to import from the complete file\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cbutton class=\"copy-btn\"\u003eCopy\u003c/button\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e apiBasedTools \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;./api-based-tools-complete.js\u0026quot;\u003c/span\u003e; \u003cspan class=\"hljs-comment\"\u003e// add complete at the end\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNow you have all API endpoints available. Feel free to try very complex workflows and see how you do.\u003c/p\u003e\n\u003cp\u003eFor me, Claude 4 Sonnet did surprisingly well, only tripping up in a few cases where it shouldn\u0026#39;t have after some extensive testing. But the smaller Qwen models were constantly getting it wrong.\u003c/p\u003e\n","markdown":"\nSo let's start with what I would call the wrong way of doing MCP – a one-to-one mapping of an API call to an MCP tool. Our issue tracker has about 15ish API calls, we're going to make each one into a tool. We'll get into why this could be a bad call but for now, it's the simplest conceptually to grasp so let's go do that. Or rather, I'm going to make you actually write the code for one and then let you copy/paste the rest. Feel free to do the whole thing, it's just a lot of code of doing the same thing.\n\nFirst, let's familiarize ourselves with the codebase in the Issues Tracker app. [The code is here on GitHub][issues], specifically the API documentation. Let's skip making the auth headers - it's too easy to prove my point. Getting an agent to successfully sign up and then manage a session just never worked for me, even when I was really trying to. So I made it so you can just nab a valid API key from the frontend. Sign up as a user and click \"copy API key\" from the header.\n\n\u003e 🚨 In the name of simplicity, I made it so every user can only ever have one valid API key at a time. If you click \"copy API key\" again, it'll generate a new one and copy it to your clipboard, meaning if you were using that API key elsewhere, it's now invalid. I didn't want to make a whole key management system.\n\nSo let's implement a tool to create issues.\n\n```javascript\nimport { z } from \"zod\";\n\nexport default function apiBasedTools(server) {\n  const API_BASE_URL = process.env.API_BASE_URL || \"http://localhost:3000/api\";\n\n  // Helper function to make HTTP requests\n  async function makeRequest(method, url, data = null, options = {}) {\n    const config = {\n      method,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...options.headers,\n      },\n    };\n\n    // Merge other options except headers (which we already handled)\n    const { headers: _, ...otherOptions } = options;\n    Object.assign(config, otherOptions);\n\n    if (data) {\n      config.body = JSON.stringify(data);\n    }\n\n    try {\n      const response = await fetch(url, config);\n      const result = await response.text();\n\n      let jsonResult;\n      try {\n        jsonResult = JSON.parse(result);\n      } catch {\n        jsonResult = result;\n      }\n\n      return {\n        status: response.status,\n        data: jsonResult,\n        headers: Object.fromEntries(response.headers.entries()),\n      };\n    } catch (error) {\n      return {\n        status: 0,\n        error: error.message,\n      };\n    }\n  }\n  server.registerTool(\n    \"issues-create\",\n    {\n      title: \"Create Issue\",\n      description: \"Create a new issue\",\n      inputSchema: {\n        title: z.string().describe(\"Issue title\"),\n        description: z.string().optional().describe(\"Issue description\"),\n        status: z\n          .enum([\"not_started\", \"in_progress\", \"done\"])\n          .optional()\n          .describe(\"Issue status\"),\n        priority: z\n          .enum([\"low\", \"medium\", \"high\", \"urgent\"])\n          .optional()\n          .describe(\"Issue priority\"),\n        assigned_user_id: z.string().optional().describe(\"Assigned user ID\"),\n        tag_ids: z.array(z.number()).optional().describe(\"Array of tag IDs\"),\n        apiKey: z.string().describe(\"API key for authentication\"),\n      },\n    },\n    async (params) =\u003e {\n      const { apiKey, ...issueData } = params;\n\n      const result = await makeRequest(\n        \"POST\",\n        `${API_BASE_URL}/issues`,\n        issueData,\n        { headers: { \"x-api-key\": apiKey } }\n      );\n\n      return {\n        content: [\n          {\n            type: \"text\",\n            text: JSON.stringify(result, null, 2),\n          },\n        ],\n      };\n    }\n  );\n}\n```\n\nPretty straight forward. The zod types both make it very readable to use and it's what the LLM is going to use to decide what to put where. Let's add one more to list all tags.\n\nWe made this into a function that we can then import into our main.js and use. So back there and add this\n\n```javascript\n// at top\nimport apiBasedTools from \"./api-based-tools.js\";\n\n// under new McpServer\napiBasedTools(server);\n```\n\nMake sure you've added this MCP server to your Claude Desktop / Tome, restart it, and then try the prompt\n\n```\nCreate a new issue in my issue tracker that says \"Add Google login to my app\", mark it as in progress, and mark it as medium priority. Here is my API key: \u003cYOUR API KEY\u003e\n```\n\nOkay, let's take it a step further. Let's say we want to be able to add tags to it. Right now if you say \"mark it as a bug\" it will try to put \"bug\" as the tag ID but the tag ID is a number. So the user either needs to know that \"bug\" is tag ID ## or it just won't work. Let's add a tool for that.\n\nAdd this tool.\n\n```javascript\nserver.registerTool(\n  \"tags-list\",\n  {\n    title: \"List Tags\",\n    description: \"Get all available tags\",\n    inputSchema: {\n      apiKey: z.string().describe(\"API key for authentication\"),\n    },\n  },\n  async ({ apiKey }) =\u003e {\n    const result = await makeRequest(\"GET\", `${API_BASE_URL}/tags`, null, {\n      headers: { \"x-api-key\": apiKey },\n    });\n\n    return {\n      content: [\n        {\n          type: \"text\",\n          text: JSON.stringify(result, null, 2),\n        },\n      ],\n    };\n  }\n);\n```\n\nNow try\n\n```\nCreate a new issue in my issue tracker that says \"Add Microsoft login to my app\", mark it as not started, and mark it as urgent priority. Add the tags frontend and feature. Here is my API key: \u003cYOUR API KEY\u003e\n```\n\nNow, if you're using Claude Desktop, this will probably work. If you're using Qwen3:0.6B, well, flip a coin. I've had a hard time to get the smallest Qwen 3 model to do anything more than one step.\n\nOnce you feel okay with that, go head and change the import in main.js to import from the complete file\n\n```javascript\nimport apiBasedTools from \"./api-based-tools-complete.js\"; // add complete at the end\n```\n\nNow you have all API endpoints available. Feel free to try very complex workflows and see how you do.\n\nFor me, Claude 4 Sonnet did surprisingly well, only tripping up in a few cases where it shouldn't have after some extensive testing. But the smaller Qwen models were constantly getting it wrong.\n\n[issues]: https://github.com/btholt/mcp-issue-tracker?tab=readme-ov-file#api-documentation\n","slug":"api-based-tools","title":"Api Based Tools","section":"Our Project","icon":"screwdriver-wrench","filePath":"/home/runner/work/complete-intro-to-mcp/complete-intro-to-mcp/lessons/05-our-project/B-api-based-tools.md","nextSlug":"/lessons/our-project/jobs-based-tools","prevSlug":"/lessons/our-project/mcp-server-design"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"our-project","slug":"api-based-tools"},"buildId":"3Mg5_eXgxRUcnLOJp0h8Y","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>